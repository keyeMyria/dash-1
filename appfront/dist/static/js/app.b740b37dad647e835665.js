webpackJsonp([1],{"+skl":function(t,e){},"94e6":function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7+uW"),a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout"},[n("Layout",[n("Header",[n("Menu",{attrs:{mode:"horizontal",theme:"dark","active-name":"1"}},[n("div",{staticClass:"layout-logo"}),t._v(" "),n("div",{staticClass:"layout-nav"},[n("MenuItem",{attrs:{name:"1"}},[n("Icon",{attrs:{type:"ios-navigate"}}),t._v(" "),n("router-link",{attrs:{to:"/company"}},[t._v("资料借用")])],1),t._v(" "),n("MenuItem",{attrs:{name:"2"}},[n("Icon",{attrs:{type:"ios-keypad"}}),t._v(" "),n("a",{attrs:{target:"_blank",href:t.$store.state.config.adminUrl}},[t._v("管理后台")])],1)],1)])],1),t._v(" "),n("Content",{staticClass:"content"},[n("Breadcrumb",{staticClass:"breadcrumb"},t._l(t.bcs,function(e){return n("BreadcrumbItem",{key:e.id},[t._v(t._s(e.title))])})),t._v(" "),n("Card",[n("div",{staticStyle:{"min-height":"200px"}},[n("router-view")],1)])],1),t._v(" "),n("Footer",{staticClass:"layout-footer-center"},[t._v("2017-2018 © nobody")])],1)],1)},staticRenderFns:[]};var o=n("VU/8")({computed:{bcs:function(){return this.$store.getters.breadcrumb}}},a,!1,function(t){n("lgdA"),n("94e6")},"data-v-4a3d3d05",null).exports,i=n("/ocq"),s=n("pFYg"),c=n.n(s),u={name:"ListCompany",data:function(){var t=this;return{columns:[{type:"index",align:"center"},{title:"标题",key:"title"},{title:"所属行业",key:"industry"},{title:"业务员",key:"saleman"},{title:"记账会计",key:"bookkeeper"},{title:"纳税人类型",key:"taxpayer_type"},{title:"执照过期日期",key:"license_status"},{title:"代理状态",key:"status"},{title:"联系人信息",key:"contactor_info"},{title:"操作",key:"action",align:"center",render:function(e,n){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.toListEntity(n.row.id)}}},"资料管理")])}}]}},methods:{toListEntity:function(t){console.log("companyId",t,"type",void 0===t?"undefined":c()(t)),this.$router.push({name:"ListEntity",params:{companyId:t}})}},computed:{data:function(){return this.$store.getters.companyList}},created:function(){this.$store.dispatch("fetchCompanyList")}},d={render:function(){var t=this.$createElement;return(this._self._c||t)("Table",{attrs:{columns:this.columns,data:this.data}})},staticRenderFns:[]};var l,m=n("VU/8")(u,d,!1,function(t){n("lPpS")},"data-v-37b3c8dd",null).exports,p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Table",{attrs:{columns:t.columns,data:t.data}}),t._v(" "),n("Button",{attrs:{type:"warning"},on:{click:t.addEntity}},[t._v("资料录入")]),t._v(" "),n("Button",{attrs:{type:"default"},on:{click:function(e){t.$router.back()}}},[t._v("后退")])],1)},staticRenderFns:[]},f=n("VU/8")({name:"ListEntity",props:["companyId"],data:function(){return{columns:[{type:"index",align:"center"},{title:"物品",key:"entity"},{title:"数量",key:"amount"},{title:"签收人",key:"signer"},{title:"签收日期",key:"sign_date"},{title:"借用人",key:"borrower"},{title:"借用日期",key:"borrow_date"},{title:"归还日期",key:"revert_borrow_date"},{title:"状态",key:"status"},{title:"备注",key:"descript"}],addEntityModal:!1}},methods:{addEntity:function(){this.$router.push({name:"AddEntity",params:{companyId:this.companyId}})}},computed:{data:function(){return this.$store.getters.entityList}},created:function(){this.$store.dispatch("filterEntityList",{companyId:this.companyId})}},p,!1,null,null,null).exports,_=n("woOf"),y=n.n(_),h=function(t){return t?t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate():t},v={props:["companyId"],data:function(){return{formItem:{entity_id:"",amount:0,signer_id:"",sign_date:"",borrower_id:"",borrow_date:"",revert_borrow_date:"",revert_date:"",status:"寄存",descript:""},dateOptions:{shortcuts:[{text:"今天",value:function(){return new Date}}]},spinShow:!0,searchPeopleLoading:!1,addEntityListModal:!1}},computed:{entitys:function(){return this.$store.getters.entitys},peoples:function(){return this.$store.getters.peoples}},methods:{handlePeopleSearch:(l=void 0,function(t){var e=this;""!==t&&(l&&clearTimeout(l),l=setTimeout(function(){l=void 0,e.searchPeopleLoading=!0,e.$store.dispatch("filterPeoples",{name:t}).then(function(){e.searchPeopleLoading=!1})},200))}),addEntity:function(){var t=this,e=y()({},this.formItem,{sign_date:h(this.formItem.sign_date),borrow_date:h(this.formItem.borrow_date),revert_borrow_date:h(this.formItem.revert_borrow_date),revert_date:h(this.formItem.revert_date),company_id:this.companyId});this.spinShow=!0,console.log("addEntityList",e),this.$store.dispatch("addEntityList",{entityList:e}).then(function(){t.spinShow=!1,t.addEntityListModal=!0})}},created:function(){var t=this;this.$store.dispatch("fetchEntitys").then(function(){t.spinShow=!1})}},b={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Form",{attrs:{model:t.formItem,"label-width":80}},[n("FormItem",{attrs:{label:"物品"}},[n("Select",{model:{value:t.formItem.entity_id,callback:function(e){t.$set(t.formItem,"entity_id",e)},expression:"formItem.entity_id"}},t._l(t.entitys,function(e){return n("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),t._v(" "),n("FormItem",{attrs:{label:"数量"}},[n("InputNumber",{attrs:{min:0},model:{value:t.formItem.amount,callback:function(e){t.$set(t.formItem,"amount",e)},expression:"formItem.amount"}})],1),t._v(" "),n("FormItem",{attrs:{label:"签收人"}},[n("Select",{attrs:{filterable:"",remote:"","remote-method":t.handlePeopleSearch,loading:t.searchPeopleLoading},model:{value:t.formItem.signer_id,callback:function(e){t.$set(t.formItem,"signer_id",e)},expression:"formItem.signer_id"}},t._l(t.peoples,function(e){return n("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),t._v(" "),n("FormItem",{attrs:{label:"签收时间"}},[n("DatePicker",{attrs:{type:"date",options:t.dateOptions},model:{value:t.formItem.sign_date,callback:function(e){t.$set(t.formItem,"sign_date",e)},expression:"formItem.sign_date"}})],1),t._v(" "),n("FormItem",{attrs:{label:"借用人"}},[n("Select",{attrs:{filterable:"",remote:"","remote-method":t.handlePeopleSearch,loading:t.searchPeopleLoading},model:{value:t.formItem.borrower_id,callback:function(e){t.$set(t.formItem,"borrower_id",e)},expression:"formItem.borrower_id"}},t._l(t.peoples,function(e){return n("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),t._v(" "),n("FormItem",{attrs:{label:"借用日期"}},[n("DatePicker",{attrs:{type:"date",options:t.dateOptions},model:{value:t.formItem.borrow_date,callback:function(e){t.$set(t.formItem,"borrow_date",e)},expression:"formItem.borrow_date"}})],1),t._v(" "),n("FormItem",{attrs:{label:"还回日期"}},[n("DatePicker",{attrs:{type:"date",options:t.dateOptions},model:{value:t.formItem.revert_borrow_date,callback:function(e){t.$set(t.formItem,"revert_borrow_date",e)},expression:"formItem.revert_borrow_date"}})],1),t._v(" "),n("FormItem",{attrs:{label:"归还日期"}},[n("DatePicker",{attrs:{type:"date",options:t.dateOptions},model:{value:t.formItem.revert_date,callback:function(e){t.$set(t.formItem,"revert_date",e)},expression:"formItem.revert_date"}})],1),t._v(" "),n("FormItem",{attrs:{label:"状态"}},[n("Select",{model:{value:t.formItem.status,callback:function(e){t.$set(t.formItem,"status",e)},expression:"formItem.status"}},[n("Option",{attrs:{value:"寄存"}},[t._v("寄存")]),t._v(" "),n("Option",{attrs:{value:"借出"}},[t._v("借出")]),t._v(" "),n("Option",{attrs:{value:"归还"}},[t._v("归还")])],1)],1),t._v(" "),n("FormItem",{attrs:{label:"备注"}},[n("Input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:5}},model:{value:t.formItem.descript,callback:function(e){t.$set(t.formItem,"descript",e)},expression:"formItem.descript"}})],1),t._v(" "),n("FormItem",[n("Button",{attrs:{type:"primary"},on:{click:t.addEntity}},[t._v("提交")]),t._v(" "),n("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"ghost"},on:{click:function(e){t.$router.back()}}},[t._v("取消")])],1)],1),t._v(" "),t.spinShow?n("Spin",{attrs:{size:"large",fix:""}}):t._e(),t._v(" "),n("Modal",{attrs:{title:"提交成功"},on:{"on-cancel":function(e){t.$router.back()},"on-ok":function(e){t.$router.back()}},model:{value:t.addEntityListModal,callback:function(e){t.addEntityListModal=e},expression:"addEntityListModal"}},[n("p",[t._v("资料录入成功")])])],1)},staticRenderFns:[]},k=n("VU/8")(v,b,!1,null,null,null).exports;r.default.use(i.a);var I=new i.a({routes:[{path:"/company",name:"ListCompany",component:m,meta:{title:"公司列表"}},{path:"/company/:companyId/entity",name:"ListEntity",component:f,props:!0,meta:{title:"资料列表"}},{path:"/company/:companyId/entity/add",name:"AddEntity",component:k,props:!0,meta:{title:"资料录入"}},{path:"/*",redirect:"/company"}]}),g=n("//Fk"),w=n.n(g),L=n("Zrlr"),E=n.n(L),x=n("wxAW"),F=n.n(x),S=n("mvHQ"),$=n.n(S),P=n("fZjL"),T=n.n(P),O=n("BO1k"),C=n.n(O),M=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r={},a=document.querySelector("input[name=csrfmiddlewaretoken]");return n=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new URLSearchParams,r=!0,a=!1,o=void 0;try{for(var i,s=C()(T()(t));!(r=(i=s.next()).done);r=!0){var c=i.value;n.append(c,t[c]instanceof Object?$()(t[c]):t[c])}}catch(t){a=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return e.Accept="application/json",e["Content-Type"]="application/x-www-form-urlencoded; charset=utf-8",{method:"POST",body:n,headers:e}}(e,n),a&&(r["X-CSRFToken"]=a.value),n.headers&&(r=y()({},r,n.headers||{})),fetch(t,y()({method:"POST",cache:"no-cache",credentials:"include"},n,{headers:r}))},A=function(t){return{status:!0,code:0,msg:{count:1,page_count:1,page:1,has_prev:!1,has_next:!1,datas:t}}},R=function(t){return t.json()},D=function(){function t(e){E()(this,t),this._url=e}return F()(t,[{key:"fakeApiData",value:function(){return{status:!0,msg:"",code:0}}},{key:"fetch",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this._devMode?w.a.resolve(this.fakeApiData(t,e)):M(this._url,t,e).then(R)}}]),t}();D.prototype._devMode=!1;var B,N=D,U=n("bOdI"),H=n.n(U),Y=n("NYxO"),j=n("Zx67"),z=n.n(j),V=n("zwoO"),Z=n.n(V),q=n("Pf15"),Q=n.n(q),W=new(function(t){function e(){return E()(this,e),Z()(this,(e.__proto__||z()(e)).apply(this,arguments))}return Q()(e,t),F()(e,[{key:"fakeApiData",value:function(t){switch(t.type){case"api_list":return A([{id:1,title:"部落胜利有限公司",address:"地球某地",salesman:"",bookkeeper:"",industry:"",taxpayer_type:"",license_status:"有效",status:"有效",contactor:"",contactor_phone:""},{id:2,title:"亡灵大叫有限公司",address:"地球某地",salesman:"",bookkeeper:"",industry:"",taxpayer_type:"",license_status:"有效",status:"有效",contactor:"",contactor_phone:""}]);default:return{status:!1,code:-100,msg:""}}}},{key:"genCustomField",value:function(t){return y()({contactor_info:t.contactor+" "+t.contactor_phone},t)}},{key:"list",value:function(){var t=this;return this.fetch({type:"api_list"}).then(function(t){return t.msg}).then(function(e){return Object({datas:e.datas.map(t.genCustomField)},e)})}}]),e}(N))("/borrow/api/company"),J=[{id:1,entity:"证明",amount:1,signer:"admin",sign_date:"2018-03-08",borrower:"雇员1",borrow_date:"2018-03-11",revert_borrow_date:"2018-04-11",revert_date:"2018-04-23",status:"寄存",descript:"test",company_id:"1"},{id:2,entity:"护照",amount:2,signer:"雇员2",sign_date:"2018-03-08",borrower:"雇员1",borrow_date:"2018-03-11",revert_borrow_date:"2018-04-11",revert_date:"2018-04-23",status:"归还",descript:"test",company_id:"2"}],X=new(function(t){function e(){return E()(this,e),Z()(this,(e.__proto__||z()(e)).apply(this,arguments))}return Q()(e,t),F()(e,[{key:"fakeApiData",value:function(t){switch(t.type){case"api_list":return A(J);case"api_filter":return A(J.filter(function(e){return e.company_id===t.data.companyId}));case"api_add":return A(!0);default:return{status:!1,code:-100,msg:""}}}},{key:"list",value:function(){return this.fetch({type:"api_list"}).then(function(t){return t.msg})}},{key:"filter",value:function(t){return this.fetch({type:"api_filter",data:t}).then(function(t){return t.msg})}},{key:"add",value:function(t){return this.fetch({type:"api_add",data:t}).then(function(t){return t.msg})}}]),e}(N))("/borrow/api/entity_list"),G=new(function(t){function e(){return E()(this,e),Z()(this,(e.__proto__||z()(e)).apply(this,arguments))}return Q()(e,t),F()(e,[{key:"fakeApiData",value:function(t){switch(t.type){case"api_list":return A([{id:1,name:"身份证"},{id:2,name:"护照"},{id:3,name:"证明"}]);default:return{status:!1,code:-100,msg:""}}}},{key:"list",value:function(){return this.fetch({type:"api_list"}).then(function(t){return t.msg})}}]),e}(N))("/borrow/api/entity"),K=[{id:1,first_name:"雇员1",last_name:""},{id:2,first_name:"雇员2",last_name:""},{id:3,first_name:"张三",last_name:""},{id:4,first_name:"fake user",last_name:""}],tt=new(function(t){function e(){return E()(this,e),Z()(this,(e.__proto__||z()(e)).apply(this,arguments))}return Q()(e,t),F()(e,[{key:"fakeApiData",value:function(t){switch(t.type){case"api_filter":return A(K.filter(function(e){return e.first_name.includes(t.data.name)}));default:return{status:!1,code:-100,msg:""}}}},{key:"genCustomField",value:function(t){return y()({name:t.first_name+" "+t.last_name},t)}},{key:"filter",value:function(t){var e=this;return this.fetch({type:"api_filter",data:t}).then(function(t){return t.msg}).then(function(t){return Object({datas:t.datas.map(e.genCustomField)},t)})}}]),e}(N))("/borrow/api/people"),et={state:{adminUrl:"/admin"}},nt={state:{companyList:[],entityList:[],breadcrumb:[],entitys:[],peoples:[]},getters:{companyList:function(t){return t.companyList},entityList:function(t){return t.entityList},breadcrumb:function(t){return t.breadcrumb},entitys:function(t){return t.entitys},peoples:function(t){return t.peoples}},mutations:(B={},H()(B,"FETCH_COMPANY_LIST",function(t,e){r.default.set(t,"companyList",e)}),H()(B,"FILTER_ENTITY_LIST",function(t,e){r.default.set(t,"entityList",e)}),H()(B,"PUSH_BREADCRUMB",function(t,e){r.default.set(t,"breadcrumb",[].concat(t.breadcrumb,[e]))}),H()(B,"POP_BREADCRUMB",function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;r.default.set(t,"breadcrumb",t.breadcrumb.slice(0,-e))}),H()(B,"FETCH_ENTITYS",function(t,e){r.default.set(t,"entitys",e)}),H()(B,"FILTER_PEOPLES",function(t,e){r.default.set(t,"peoples",e)}),B),actions:{fetchCompanyList:function(t){var e=t.commit;return W.list().then(function(t){e("FETCH_COMPANY_LIST",t.datas)})},filterEntityList:function(t,e){var n=t.commit;return X.filter(e).then(function(t){n("FILTER_ENTITY_LIST",t.datas)})},fetchEntitys:function(t){var e=t.commit;return G.list().then(function(t){e("FETCH_ENTITYS",t.datas)})},filterPeoples:function(t,e){var n=t.commit;return tt.filter(e).then(function(t){n("FILTER_PEOPLES",t.datas)})},addEntityList:function(t,e){t.commit;return X.add(e)}}};var rt=n("BTaQ"),at=n.n(rt);n("+skl");N.prototype._devMode=window._devMode||!1,r.default.config.productionTip=!1,r.default.use(at.a),r.default.use(Y.a),new r.default({el:"#app",store:new Y.a.Store({modules:{config:et,company:nt},strict:!0}),router:I,components:{App:o},template:"<App />"})},lPpS:function(t,e){},lgdA:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.b740b37dad647e835665.js.map